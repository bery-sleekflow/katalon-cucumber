name: Katalon CI
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]
jobs:
  katalon-test:
    runs-on: ubuntu-latest
    steps:
        # Step 1: Checkout the repository
        - name: Checkout repository
          uses: actions/checkout@v2

        # Step 2: Set up JDK (Katalon requires Java)
        - name: Set up JDK 8
          uses: actions/setup-java@v1
          with:
            java-version: 1.8

        # Step 3: Install Katalon Studio
        - name: Install Katalon Studio
          run: |
            wget https://github.com/katalon-studio/katalon-studio/releases/download/v8.4.0/Katalon_Studio_Linux_64-8.4.0.tar.gz
            tar -xzf Katalon_Studio_Linux_64-8.4.0.tar.gz

        # Step 4: Run Katalon Tests
        - name: Run Katalon Tests
          run: |
            cd ./Katalon_Studio_Linux_64-8.4.0
            ./katalonc -noSplash -runMode=console -projectPath="$/your-katalon-project.prj" \
            -retry=0 -testSuitePath="Test Suites/Regression Web" -browserType="Chrome"

        # Step 5: Store Test Results
        - name: Archive Test Results
          uses: actions/upload-artifact@v2
          with:
            name: test-results
            path: ./Reports/